
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Login - Krushna Mens Wear</title>
<script type="module">
import { firebaseConfig } from './firebase.js';
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, sendEmailVerification } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

window.signup = async function(){
  const name = nameInput.value;
  const mobile = mobileInput.value;
  const email = emailInput.value;
  const pass = passwordInput.value;

  const user = await createUserWithEmailAndPassword(auth,email,pass);
  await sendEmailVerification(user.user);

  await setDoc(doc(db,"users",user.user.uid),{
    name:name,
    mobile:mobile,
    role:"user"
  });

  alert("Verification email sent. Verify email then login.");
}

window.login = async function(){
  const email = emailInput.value;
  const pass = passwordInput.value;

  const user = await signInWithEmailAndPassword(auth,email,pass);

  if(!user.user.emailVerified){
    alert("Verify email first");
    return;
  }

  window.location="index.html";
}
</script>
<style>
body{font-family:Arial;text-align:center;background:#f5f5f5}
.box{margin-top:100px}
input{padding:8px;margin:5px;width:260px}
button{padding:8px 15px;margin:5px;background:#0d47a1;color:white;border:none}
</style>
</head>
<body>
<div class="box">
<h2>Krushna Mens Wear</h2>
<input id="nameInput" placeholder="Full Name"><br>
<input id="mobileInput" placeholder="Mobile Number"><br>
<input id="emailInput" placeholder="Email"><br>
<input id="passwordInput" type="password" placeholder="Password"><br>
<button onclick="login()">Login</button>
<button onclick="signup()">Sign Up</button>
</div>
</body>
</html>
